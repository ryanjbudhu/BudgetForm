(this.webpackJsonpgrantcalc=this.webpackJsonpgrantcalc||[]).push([[0],{147:function(e,t,a){e.exports={content:"BudgetInfo_content__27obA",pageTitle:"BudgetInfo_pageTitle__VDZRj"}},148:function(e,t,a){e.exports={row:"Main_row__O0Ybk",col:"Main_col__3wFmk"}},152:function(e,t){},169:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},171:function(e,t,a){e.exports={stepsParent:"BudgetSteps_stepsParent__CZ_V4"}},174:function(e,t,a){e.exports={content:"BudgetPage_content__2lFbs"}},212:function(e,t,a){e.exports=a(370)},217:function(e,t,a){},218:function(e,t,a){},223:function(e,t){},224:function(e,t){},369:function(e){e.exports=JSON.parse('{"info":{"name":"","project":"","division":"","start":null,"end":null,"grant":null,"contact":"","phone":""},"pages":[{"title":"labor","label":"Labor","items":[{"key":"a","name":"Full Time Personnel","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"b","name":"Part Time Personnel","children":[],"quantity":null,"rate":null,"header":true,"childCount":0}]},{"title":"equip","label":"Equiptment and Supplies","items":[{"key":"a","name":"Capital Equipment >5k","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"b","name":"Non-Capital Equipment <5k","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"c","name":"Consumable Materials and Supplies","children":[],"quantity":null,"rate":null,"header":true,"childCount":0}]},{"title":"consult","label":"Consultants","items":[{"key":"a","name":"Consultants","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"b","name":"Subcontracts","children":[],"quantity":null,"rate":null,"header":true,"childCount":0}]},{"title":"expenses","label":"Non-Personnel Expenses","items":[{"key":"a","name":"Major Operating Expenses","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"b","name":"Travel, Meals, Meetings and Registration","children":[],"quantity":null,"rate":null,"header":true,"childCount":0}]},{"title":"overhead","label":"Overhead","items":[{"key":"a","name":"Rent","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"b","name":"Utilities","children":[],"quantity":null,"rate":null,"header":true,"childCount":0},{"key":"c","name":"Insurance","children":[],"quantity":null,"rate":null,"header":true,"childCount":0}]}]}')},370:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=(a(217),a(47)),i=a(44),u=a(104),s=a(169),m=a.n(s),p=(a(218),a(41)),d=a(170),h=a(79),f=function(e){var t=e.csvData,a=e.fileName,n=function(e){var t=[];return e.forEach((function(e){var a=l(e,!0),n=Object(o.a)(a,2),r=n[0],c=n[1];c.push({pagename:"Total ".concat(e.label),total:r}),t.push({sheetName:e.label,sheetData:c})})),t},l=function(e,t){var a=0,n=[];return e.items.forEach((function(e){var r,l;(r=t?{pagename:"Total ".concat(e.name)}:{pagename:e.name}).quantity=0,r.rate=0,r.total=0,e.children.forEach((function(e){l={pagename:e.name,quantity:e.quantity,rate:e.rate,total:Number.parseInt(e.quantity)*Number.parseFloat(e.rate)},r.quantity+=Number.parseInt(e.quantity),r.rate+=Number.parseFloat(e.rate),r.total+=l.total})),e.children.length>0&&(r.rate=r.rate/e.children.length),a+=r.total,t&&void 0!==l&&n.push([],l),n.push(r)})),[a,n]},c=function(e){var t=[[]],a=0;return e.forEach((function(e){t.push([],{pagename:e.label});var n=l(e,!1),r=Object(o.a)(n,2),c=r[0],i=r[1];(t=t.concat(i)).push({pagename:"Total ".concat(e.label),total:c.toFixed(2)}),t.push([]),a+=c})),t.push([],{pagename:"Total",total:a.toFixed(2)}),t};return r.a.createElement(p.a,{type:"primary",onClick:function(e){return function(e,t){var a=c(e.pages),r=h.utils.json_to_sheet(a),l=h.utils.book_new();h.utils.book_append_sheet(l,r,"Overview"),n(e.pages).forEach((function(e){var t=e.sheetName,a=e.sheetData,n=h.utils.json_to_sheet(a);h.utils.book_append_sheet(l,n,t)}));var o=h.write(l,{bookType:"xlsx",type:"array"}),i=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});d.saveAs(i,t+".xlsx")}(t,a)}},"Export")},b=a(380),y=a(384),g=a(385),E=a(386),v=a(387),j=a(388),C=a(389),k=a(171),x=a.n(k),N=b.a.Step;function O(e){return r.a.createElement(b.a,{direction:"vertical",current:e.page,onChange:e.onChange,className:x.a.stepsParent},r.a.createElement(N,{title:"Information",icon:r.a.createElement(y.a,null)}),r.a.createElement(N,{title:"Labor",icon:r.a.createElement(g.a,null)}),r.a.createElement(N,{title:"Equiptment and Supplies",icon:r.a.createElement(E.a,null)}),r.a.createElement(N,{title:"Consultants",icon:r.a.createElement(v.a,null)}),r.a.createElement(N,{title:"Non-Personnel Expenses",icon:r.a.createElement(j.a,null)}),r.a.createElement(N,{title:"Overhead",icon:r.a.createElement(C.a,null)}))}var D=a(172),S=a(173),I=a(208),w=a(203),q=a(90),_=a.n(q),F=a(118),P=a(111),T=a(149),B=a(174),A=a.n(B),U=a(379),R=a(378),M=a(382),V=a(381),G=a(383),J=a(376),W=U.a.Title,Y=U.a.Text,L=r.a.createContext(),Z=function(e){e.index;var t=Object(T.a)(e,["index"]),a=R.a.useForm(),n=Object(o.a)(a,1)[0];return r.a.createElement(R.a,{form:n,component:!1},r.a.createElement(L.Provider,{value:n},r.a.createElement("tr",t)))},z=function(e){var t=e.title,a=e.editable,l=e.children,c=e.dataIndex,u=e.record,s=e.handleSave,m=e.inputType,p=Object(T.a)(e,["title","editable","children","dataIndex","record","handleSave","inputType"]),d=Object(n.useState)(!1),h=Object(o.a)(d,2),f=h[0],b=h[1],y=Object(n.useRef)(),g=Object(n.useContext)(L);Object(n.useEffect)((function(){f&&y.current.focus()}),[f]);var E=function(){b(!f),g.setFieldsValue(Object(P.a)({},c,u[c]))},v=function(){var e=Object(F.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.validateFields();case 3:a=e.sent,E(),s(Object(i.a)(Object(i.a)({},u),a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),j=l;if(a&&(!u.header||u.edit&&"name"===c))j=f?r.a.createElement(R.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}]},"number"===m?r.a.createElement(M.a,{ref:y,onPressEnter:v,onBlur:v}):r.a.createElement(V.a,{ref:y,onPressEnter:v,onBlur:v})):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E},"rate"===c?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number.parseFloat(l[1])):l);else if(u&&u.header&&u.children.length>0&&"rate"===c){var C=u.children.map((function(e){return Number.parseFloat(e[c])})).reduce((function(e,t){return e+t}));j=r.a.createElement(Y,{strong:!0},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(C/u.children.length))}else if(u&&u.header&&u.children.length>0&&("quantity"===c||"total"===c)){var k=u.children.map((function(e){return Number.parseFloat(e[c])})).reduce((function(e,t){return e+t}));j=r.a.createElement(Y,{strong:!0},k)}return r.a.createElement("td",p,j)},H=function(e){Object(I.a)(a,e);var t=Object(w.a)(a);function a(e){var n;Object(D.a)(this,a),(n=t.call(this,e)).handleDelete=function(e){var t=n.props.pageData.items,a=t.findIndex((function(t){return t.key===e.charAt(0)}));e.length>1?t[a].children=t[a].children.filter((function(t){return t.key!==e})):t=t.filter((function(t){return t.key!==e})),n.props.dispatch({type:"page",step:n.props.step,pageData:t})},n.handleAdd=function(){var e=n.props.pageData,t=e.items.length+1,a={key:String.fromCharCode(96+t),name:"".concat(e.label," Item ").concat(t),quantity:null,rate:null,header:!0,edit:!0,childCount:0,children:[]};n.props.dispatch({type:"page",step:n.props.step,pageData:[].concat(Object(u.a)(e.items),[a])})},n.handleAddChild=function(e){var t=n.props.pageData.items,a=t.findIndex((function(t){return t.key===e}));if(!(a<0)){var r=t[a].childCount+1;t[a].childCount=r,t[a].children.push({key:e+r,name:"Item ".concat(r),quantity:0,rate:0,header:!1}),n.props.dispatch({type:"page",step:n.props.step,pageData:t})}},n.handleSave=function(e){var t=Object(u.a)(n.props.pageData.items),a=t.findIndex((function(t){return e.key.charAt(0)===t.key})),r=t[a];if(void 0!==e.header&&e.header)t.splice(a,1,Object(i.a)(Object(i.a)({},r),e));else{var l=t[a].children.findIndex((function(t){return e.key===t.key})),c=t[a].children[l];t[a].children.splice(l,1,Object(i.a)(Object(i.a)({},c),e))}n.props.dispatch({type:"page",step:n.props.step,pageData:t})},n.addWrapper=r.a.createRef();var l=n.props.pageData.items[0],c=Object.keys(l).filter((function(e){return"key"!==e&&"children"!==e&&"header"!==e&&"childCount"!==e}));return n.columns=c.map((function(e){return{title:(t=e,t.charAt(0).toUpperCase()+t.slice(1)),dataIndex:e,inputType:"name"===e?"text":"number",editable:!0,key:e};var t})),n.columns.push({title:"Total",dataIndex:"total",render:function(e,t){if(t.header){var a=t.children.map((function(e){return isNaN(Number.parseInt(e.quantity))||isNaN(Number.parseFloat(e.rate))?0:Number.parseInt(e.quantity)*Number.parseFloat(e.rate)})).reduce((function(e,t){return e+t}),0);return r.a.createElement(Y,{strong:!0},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a))}var n=Number.parseInt(t.quantity)*Number.parseFloat(t.rate);return isNaN(n)&&(n=0),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)}},{title:"operation",dataIndex:"operation",render:function(e,t){return n.props.pageData.items.length>=1?r.a.createElement(r.a.Fragment,null,t.header?r.a.createElement(p.a,{type:"link",onClick:function(){return n.handleAddChild(t.key)}},"Add"):r.a.createElement(G.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.key)}},r.a.createElement(p.a,{type:"link"},"Delete")),void 0!==t.edit&&t.edit&&r.a.createElement(G.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.key)}},r.a.createElement(p.a,{type:"link"},"Delete"))):null}}),n}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=this.props.pageData,a={body:{row:Z,cell:z}},n=this.columns.map((function(t){return t.editable?Object(i.a)(Object(i.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,inputType:t.inputType,handleSave:e.handleSave}}}):t}));return r.a.createElement("div",{className:A.a.content},r.a.createElement(W,null,this.props.pageData.label),r.a.createElement(p.a,{onClick:this.handleAdd,type:"primary",style:{marginTop:24,marginBottom:16},ref:this.addWrapper},"Add a Section"),r.a.createElement(J.a,{components:a,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:t.items,columns:n,expandable:{defaultExpandAllRows:!0},pagination:{hideOnSinglePage:!0},summary:function(e){var t=e.map((function(e){return e.children.map((function(e){return Number.parseInt(e.quantity)*Number.parseFloat(e.rate)})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0);return r.a.createElement(J.a.Summary.Row,null,r.a.createElement(J.a.Summary.Cell,null,"Total"),r.a.createElement(J.a.Summary.Cell,null),r.a.createElement(J.a.Summary.Cell,null),r.a.createElement(J.a.Summary.Cell,null,r.a.createElement(Y,{style:{fontWeight:"bolder"}},new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t))))}}))}}]),a}(n.Component),$=a(147),K=a.n($),Q=a(377),X=a(127),ee=a(59),te=a.n(ee),ae=U.a.Title,ne=Q.a.RangePicker,re={labelCol:{xs:16,sm:14,md:12,lg:8,xl:6,xxl:4},wrapperCol:{span:16}};function le(e){var t=R.a.useForm(),a=Object(o.a)(t,1)[0],n=function(){var t=Object(F.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.validateFields();case 2:n=t.sent,e.dispatch({type:"info",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:K.a.content},r.a.createElement(ae,{className:K.a.pageTitle},"Information"),r.a.createElement(R.a,Object.assign({form:a},re,{initialValues:{name:e.infoData.name,project:e.infoData.project,division:e.infoData.division,range:e.infoData.start&&e.infoData.end?[te()(e.infoData.start),te()(e.infoData.end)]:null,grant:e.infoData.grant,contact:e.infoData.contact,phone:e.infoData.phone}}),r.a.createElement(R.a.Item,{name:"name",label:"Vendor/Contractor Name"},r.a.createElement(V.a,{onPressEnter:n,onBlur:n})),r.a.createElement(R.a.Item,{name:"project",label:"Project Name"},r.a.createElement(V.a,{onPressEnter:n,onBlur:n})),r.a.createElement(R.a.Item,{name:"division",label:"Division Name"},r.a.createElement(V.a,{onPressEnter:n,onBlur:n})),r.a.createElement(R.a.Item,{name:"range",label:"Project Period"},r.a.createElement(ne,{onChange:n,format:"MM/DD/YYYY"})),r.a.createElement(R.a.Item,{name:"grant",label:"Grant or Non-Grant"},r.a.createElement(X.default.Group,null,r.a.createElement(X.default.Button,{value:!0},"Grant"),r.a.createElement(X.default.Button,{value:!1},"Non Grant"))),r.a.createElement(R.a.Item,{name:"contact",label:"Contact Name"},r.a.createElement(V.a,{onPressEnter:n,onBlur:n})),r.a.createElement(R.a.Item,{name:"phone",label:"Phone Number"},r.a.createElement(V.a,{onPressEnter:n,onBlur:n}))))}var ce=a(148),oe=a.n(ce),ie=a(372),ue=a(373),se=a(374),me=a(375),pe=ie.a.Content;function de(e){return r.a.createElement(pe,null,r.a.createElement(ue.a,{className:oe.a.row},r.a.createElement(se.a,{span:5,pull:5,className:oe.a.col},r.a.createElement(O,{onChange:e.onChange,page:e.step}),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(me.a,{align:"center",style:{marginBottom:"3rem"}},r.a.createElement(f,{csvData:e.data,fileName:"Pricing and Budget"}),r.a.createElement(G.a,{title:"Sure to reset?",onConfirm:function(){return e.dispatch({type:"reset"})}},r.a.createElement(p.a,{type:"ghost"},"Reset"))))),r.a.createElement(se.a,{span:19,push:5},0===e.step?r.a.createElement(le,{dispatch:e.dispatch,infoData:e.data.info}):r.a.createElement(H,{pageData:e.data.pages[e.step-1],step:e.step,dispatch:e.dispatch}))))}var he=ie.a.Header,fe=a(369);function be(e,t){switch(t.type){case"page":var a=Object(u.a)(e.pages);return a[t.step].items=t.pageData,Object(i.a)(Object(i.a)({},e),{},{pages:a});case"info":for(var n=e.info,r=0,l=Object.entries(t.payload);r<l.length;r++){var c=Object(o.a)(l[r],2),s=c[0],m=c[1];if(void 0!==m&&null!==m)if("range"===s){var p=Object(o.a)(m,2),d=p[0],h=p[1];n.start=d.unix(),n.end=h.unix()}else n[s]=m}return Object(i.a)(Object(i.a)({},e),{},{info:n});case"reset":return fe;default:throw new Error("Action of unknown type.")}}var ye=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],l=t[1],c=JSON.parse(localStorage.getItem("VLProjectBudget"))||fe,i=Object(n.useReducer)(be,c||fe),u=Object(o.a)(i,2),s=u[0],p=u[1];return Object(n.useEffect)((function(){localStorage.setItem("VLProjectBudget",JSON.stringify(s))}),[s]),r.a.createElement(ie.a,null,r.a.createElement(he,{style:{position:"fixed",zIndex:2,width:"100%",textAlign:"center"}},r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"})),r.a.createElement(ie.a,null,r.a.createElement(de,{step:a,data:s,dispatch:p,onChange:function(e){return l(e)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ye,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.a1396615.chunk.js.map